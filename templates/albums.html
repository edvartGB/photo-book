{% extends "base.html" %}
{% block title %}Albums - Photo Book{% endblock %}

{% block nav_toolbar %}
<div class="nav-toolbar">
    <button type="button" id="create-album-btn" class="nav-action">+ Album</button>
</div>
{% endblock %}

{% block content %}

<form method="POST" id="create-album-form" hidden>
    <input type="hidden" name="name" id="create-album-name">
</form>

{% if albums %}
<div class="album-grid">
    {% for album in albums %}
    <a href="{{ url_for('album', album_id=album['id']) }}" class="album-card">
        {% if album['cover_filename'] %}
        <img src="{{ url_for('serve_thumbnail', filename=album['cover_filename']) }}" alt="{{ album['name'] }}">
        {% else %}
        <div class="album-placeholder"></div>
        {% endif %}
        <div class="album-info">
            <span class="album-name">{{ album['name'] }}</span>
            <span class="album-count">{{ album['photo_count'] }} photo{{ 's' if album['photo_count'] != 1 }}</span>
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<p class="empty">No albums yet.</p>
{% endif %}
{% endblock %}

{% block scripts %}
<script>
document.getElementById("create-album-btn").addEventListener("click", () => {
    const name = prompt("Album name:");
    if (name && name.trim()) {
        document.getElementById("create-album-name").value = name.trim();
        document.getElementById("create-album-form").submit();
    }
});
</script>
{% endblock %}
